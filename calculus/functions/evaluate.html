---
title: Evaluate function - Calculus-related tools
layout: default
---

<h1 class="text-center text-color">{{ page.title }}</h1>

<div class="p-3 border-color text-color container fs-5 mt-5">
    <!-- enter function -->
    <div class="row">
        <div class="col form-control bg-transparent border-0">
            <label for="function" class="pb-3 fs-5">Your function</label>
            <input type="text" value="x^2" id="function" class="form-control mathjax_process" oninput="updatePreview()">
        </div>
        <div class="col form-control bg-transparent border-0">
            <label for="function-review" class="pb-3 fs-5">Preview</label>
            <p id="function-review" class="form-control" style="opacity: 0.8;"></p>
        </div>
    </div>

    <hr>

    <button class="btn border-color" onclick="updateVariableFields(true)">Add variable</button>
    <button class="btn border-color" onclick="updateVariableFields(false)">Remove variable</button>

    <ul class="pt-3" id="variables">
        <li><label>Variable name: <input type="text" class="px-2" value="x"></label> =
            <label><input type="text" value="5"></label></li>
    </ul>

    <div class="mt-3 text-end">
        <button onclick="process()">Submit</button>
    </div>

    <script>
        const function_field = document.querySelector('#function')
        const function_preview = document.querySelector('#function-review')
        const inputFields = document.querySelector('#variables')

        function process() {
            alert('not yet')
        }
    </script>
</div>

<script>
    function updateVariableFields(increase=true) {
        let real_number_of_elements = inputFields.children.length;
        let number_of_elements = 0
        for (const child of inputFields.children) {
            if (child.hidden) break;
            number_of_elements++;
        }

        if (increase) {
            // ex: two elements, 1 was hidden
            // 1 != 2
            // then children[1] is shown (=> both 0 and 1 are shown)
            if (number_of_elements !== real_number_of_elements) {
                // show back
                inputFields.children[number_of_elements].hidden = false;
            } else {
                // create one
                let li = document.createElement('li');
                li.innerHTML = "<label>Variable name: <input type=\"text\" class=\"px-2\" value=\"x\"></label> =" +
                    "<label><input type=\"text\" value=\"5\"></label>"
                inputFields.appendChild(li);
            }
        } else {
            // we got something to remove
            if (number_of_elements !== 0) {
                inputFields.children[number_of_elements-1].hidden = true;
            }
        }
    }
</script>

{% include _partial/results_div.html mathjax="true" %}

<!--
Preview
-->
<script>
    function updatePreview() {
        function_preview.innerHTML = `\\[${function_field.value}\\]`
        // too soon, unneeded
        if (MathJax.typesetPromise === undefined) return;
        MathJax.typesetPromise();
    }
    updatePreview();
</script>