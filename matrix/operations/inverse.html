---
title: Inverse - Matrix-related tools
layout: default
---

<h1 class="text-center text-color">{{ page.title }}</h1>
{% include _credits/maths.html %}

<!--
SUBMIT DATA
- A
-->
<div class="p-3 border-color container fs-5 mt-5">
	{% include _math/input_matrix.html modifier="A" generate="true" square_matrix="true" %}

	<details class="mt-3 border-color p-3">
		<summary>Options</summary>

		<table class="table border-color table-bordered table-striped mt-3">
			<tr>
				<td><label for="evaluate_fractions">Add another matrix with the result after evaluating fractions.</label></td>
				<td><input id="evaluate_fractions" type="checkbox"></td>
			</tr>
		</table>
	</details>

	<div class="mt-3 text-end">
		<button onclick="process()">Submit</button>
	</div>
</div>

<!--
SUBMIT DATA
-->
{% include _lib/matrix.html %}

<script>
	const matrix_A = document.querySelector('#matrix-A');
	const alt_matrix_option = document.querySelector('#evaluate_fractions');

	function process() {
		let A_array = tableToArray(matrix_A);
		let A = inbrowser_matrix.createMatrix(A_array.flat(), A_array.length, A_array.length)
		let json = inbrowser_matrix.matrix_inverse(A)

		// show result
		results.hidden = false;

		if (json.result != null) {
			let A_inv = json.result.toArray();
			if (alt_matrix_option.checked) {
				// if alternate matrix enabled, show both 0.33 and 1/3
				results_div.innerHTML = `<p>@A^{-1} = ${matrixToLatex(A_inv)}@</p>`
				results_div.innerHTML += `<p>@A^{-1} = ${matrixToLatex(to_fractions(A_inv))}@</p>`
			} else {
				// show as fractions
				results_div.innerHTML = `<p>@A^{-1} = ${matrixToLatex(to_fractions(A_inv))}@</p>`
			}
			MathJax.typesetPromise();
		} else {
			results_div.innerHTML = json.error;
		}
	}

	function to_fractions(A_inv) {
		for (const i in A_inv) {
			for (const j in A_inv[i]) {
				let v = A_inv[i][j];
				if (v !== 0 && (v = mathjs.fraction(v)).d !== 1) {
					A_inv[i][j] = mathjs.format(v, { fraction: 'ratio' })
				}
			}
		}
		return A_inv;
	}
</script>

{% include _partial/results_div.html mathjax="true" %}